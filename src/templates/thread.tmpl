<!-- thread_view -->
<table id='thread_view' summary=''>
{if $n_rows > 0}
{foreach item=thread from=$threads}
{foreach item=posting from=$thread->get_postings()}
  <tr class='posting'>
    {strip}
  <td>
{*
  $indent:
  1: INDENT_DRAW_DASH
  2: INDENT_DRAW_SPACE
*}

{foreach item=indent from=$posting->get_indent() name=idx}
  {if $indent == 1}
    <img src='{$__theme_dir}/img/l.png' alt='| ' />
  {elseif !$smarty.foreach.idx.first}
    <b class='spacer'>&#160;</b>
  {else}
    <b class='indent'>&nbsp;</b>
  {/if}
{/foreach}

{*
  $posting->get_relation():
  1: PARENT_WITHOUT_CHILDREN
  2: PARENT_WITH_CHILDREN_UNFOLDED
  3: PARENT_WITH_CHILDREN_FOLDED
  4: BRANCHBOTTOM_CHILD_WITHOUT_CHILDREN
  5: BRANCHBOTTOM_CHILD_WITH_CHILDREN
  6: CHILD_WITHOUT_CHILDREN
  7: CHILD_WITH_CHILDREN
*}
{if $posting->get_relation() == 1}
  <img src='{$__theme_dir}/img/o.png' alt='[o]' />&nbsp;
{elseif $posting->get_relation() == 2}
  <a href='{$posting->get_fold_url_string()|escape}'>
    <img src='{$__theme_dir}/img/m.png' alt='[-]' />
  </a>&nbsp;
{elseif $posting->get_relation() == 3}
  <a href='{$posting->get_fold_url_string()|escape}'>
    <img src='{$__theme_dir}/img/p.png' alt='[+]' />
  </a>&nbsp;
{elseif $posting->get_relation() == 4 || $posting->get_relation() == 5}
  <img src='{$__theme_dir}/img/e.png' alt='\ ' />
{elseif $posting->get_relation() == 6 || $posting->get_relation() == 7}
  <img src='{$__theme_dir}/img/x.png' alt='|-' />
{/if}

{if $posting->get_priority() > 0}
  <img class='icon' src='{$__theme_dir}/img/sticky.png' alt='[!]' />&nbsp;
{/if}
{if $posting->is_selected()}
  <span class='selected'>{$posting->get_subject()|escape}</span>
{elseif !$posting->is_active()}
  {$posting->get_subject()|escape}
{else}
  {$posting->get_url_html()}
{/if}
{if $posting->get_relation() == 3}&nbsp;({$posting->get_n_children()}){/if}
{if $posting->was_moved()}
  &nbsp;<img class='icon' src="{$__theme_dir}/img/move.png" alt='[<]' title="{t}Moved{/t}" />
{/if}
  </td>
  {/strip}
  {strip}
  <td class='thread_name'>
{if $posting->is_selected()}
    <span class='selected'>{$posting->get_username()|escape}</span>
  {else}
    {$posting->get_username()|escape}
{/if}
  {/strip}
{if $posting->get_user_is_special()}
  <img class='icon'
       src='{$posting->get_user_icon()|escape}'
       alt='[s]'
       title='{$posting->get_user_icon_name()|escape}' />
{/if}
  {strip}
  </td>
  {/strip}
  {strip}
{if $posting->is_selected()}
  <td class='thread_date'>
    <span class='selected'>{$posting->get_created_time()}</span>
  </td>
{elseif $posting->is_new()}
  <td class='thread_date'>
    <span style='color:#{$posting->get_newness_hex()}0000'>{$posting->get_created_time()}</span>
  </td>
{else}
  <td class='thread_date'>{$posting->get_created_time()}</td>
{/if}
  {/strip}
  </tr>
{/foreach}
{/foreach}
{else}
  <tr>
    <td><div id='empty_forum_message'>{t}(No postings found){/t}</div></td>
  </tr>
{/if}
</table>
<!-- end thread_view -->
